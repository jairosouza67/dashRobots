<!DOCTYPE html>
<html>
<head>
    <title>RespiraZen - Debug</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 40px; }
        .success { color: green; }
        .error { color: red; }
        .info { color: blue; }
        pre { background: #f5f5f5; padding: 10px; border-radius: 5px; }
    </style>
</head>
<body>
    <h1>üîç RespiraZen - Debug Page</h1>
    <p>Esta p√°gina ajuda a diagnosticar problemas de configura√ß√£o.</p>
    
    <h2>üìã Environment Variables Check</h2>
    <div id="env-check"></div>
    
    <h2>üîß Firebase Connection Test</h2>
    <div id="firebase-check">Testando...</div>
    
    <h2>üìä Build Information</h2>
    <div id="build-info">
        <p><strong>Build Time:</strong> <span id="build-time"></span></p>
        <p><strong>User Agent:</strong> <span id="user-agent"></span></p>
    </div>
    
    <script>
        // Environment Variables Check
        const requiredEnvs = [
            'VITE_FIREBASE_API_KEY',
            'VITE_FIREBASE_AUTH_DOMAIN',
            'VITE_FIREBASE_PROJECT_ID',
            'VITE_FIREBASE_STORAGE_BUCKET',
            'VITE_FIREBASE_MESSAGING_SENDER_ID',
            'VITE_FIREBASE_APP_ID'
        ];
        
        let envHtml = '<ul>';
        requiredEnvs.forEach(env => {
            const value = import.meta.env[env];
            if (value && value !== 'undefined') {
                envHtml += `<li class="success">‚úÖ ${env}: ${value.substring(0, 20)}...</li>`;
            } else {
                envHtml += `<li class="error">‚ùå ${env}: NOT SET</li>`;
            }
        });
        envHtml += '</ul>';
        document.getElementById('env-check').innerHTML = envHtml;
        
        // Firebase Test
        try {
            import('https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js').then(({ initializeApp }) => {
                const config = {
                    apiKey: import.meta.env.VITE_FIREBASE_API_KEY,
                    authDomain: import.meta.env.VITE_FIREBASE_AUTH_DOMAIN,
                    projectId: import.meta.env.VITE_FIREBASE_PROJECT_ID,
                };
                
                if (config.apiKey) {
                    const app = initializeApp(config);
                    document.getElementById('firebase-check').innerHTML = '<span class="success">‚úÖ Firebase initialization successful!</span>';
                } else {
                    document.getElementById('firebase-check').innerHTML = '<span class="error">‚ùå Firebase config missing</span>';
                }
            }).catch(err => {
                document.getElementById('firebase-check').innerHTML = `<span class="error">‚ùå Firebase error: ${err.message}</span>`;
            });
        } catch (err) {
            document.getElementById('firebase-check').innerHTML = `<span class="error">‚ùå Firebase error: ${err.message}</span>`;
        }
        
        // Build info
        document.getElementById('build-time').textContent = new Date().toISOString();
        document.getElementById('user-agent').textContent = navigator.userAgent;
        
        // Console log for debugging
        console.log('Environment variables:', import.meta.env);
        console.log('Current URL:', window.location.href);
    </script>
</body>
</html>